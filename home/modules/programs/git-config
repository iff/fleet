[core]
    sshCommand = git-ssh-dispatch
    editor = nvim
    # no SIGPIPE exit codes (usually 128+13=141) if you exit less before reading all piped input
    # but potentially slow, because sponge first consumes, before it passes on
    pager = zsh -c 'sponge | less -S'
[branch]
    sort = "-committerdate"
[color]
    ui = true
    diff = auto
[commit]
    verbose = true
[diff]
    algorithm = "histogram"
    colorMoved = "plain"
    mnemonicPrefix = true
    renames = true
[fetch]
    all = true
    prune = true
    pruneTags = true
[init]
    defaultBranch = "main"
[merge]
    conflictstyle = "zdiff3"
    tool = "nvim"
[push]
    autoSetupRemote = true
    default = simple
[rebase]
    autoSquash = true
    autoStash = true
    updateRefs = true
[rerere]
    autoupdate = true
    enabled = true
[tag]
    sort = "version:refname"
[user]
    name = "Yves Ineichen"
    signingKey = "165AEDEB"
[alias]
    b = "branch -vv"
    ba = "branch -avv"
    c = "commit"
    cm = "commit -m"
    co = "checkout"
    cf = "!git checkout $(git branch -a --format '%(refname:short)' | sed 's~origin/~~' | sort | uniq | fzf)"
    f = "fetch --all --tags --prune --force"
    m = "merge"
    p = "push"
    pu = "push -u origin HEAD"
    s = "-c advice.statusHints=false status --show-stash"

    d = "diff -C"
    ds = "diff -C --stat"
    dsp = "diff -C --stat -p"
    dw = "diff -C --color-words"

    l = "log -C --decorate"
    ls = "log -C --stat --decorate"
    lsp = "log -C --stat -p --decorate"

    lc = "log ORIG_HEAD.. --stat --no-merges"

    lg = "log --graph '--pretty=tformat:%Cblue%h%Creset %Cgreen%ar%Creset %Cblue%d%Creset %s'"
    lga = "log --graph '--pretty=tformat:%Cblue%h%Creset %Cgreen%ar%Creset %Cblue%d%Creset %s' --all"
    l19 = "log --graph '--pretty=tformat:%Cblue%h%Creset %Cgreen%ar%Creset %Cblue%d%Creset %s' --all -19"
    lsd = "log --graph '--pretty=tformat:%Cblue%h%Creset %Cgreen%ar%Creset %Cblue%d%Creset %s' --all --simplify-by-decoration"
    lfp = "log --graph '--pretty=tformat:%Cblue%h%Creset %Cgreen%ar%Creset %Cblue%d%Creset %s' --first-parent"

    # "show-branch -g=N" can't be aliased for N easily, so we stop here:
    sb = "show-branch --sha1-name"

    ru = "remote update"
    rbi = "rebase -i"
    rbc = "rebase --continue"
    rbim = "rebase -i main"
    # instead of git pull --rebase
    ro = "rebase origin/$(git branch --show-current)"

    ls-del = "ls-files -d"
    ls-mod = "ls-files -m"
    ls-new = "ls-files --exclude-standard -o "
    ls-ign = "ls-files --exclude-standard -o -i"

    # whois = "!sh -c 'git log -i -1 --pretty=\"format:%an <%ae>\n\" --author=\"$1\"' -"
    # whatis = "show -s --pretty='tformat:%h (%s, %ad)' --date=short"

    edit-unmerged = "!f() { git diff --name-status --diff-filter=U | cut -f2 ; }; v `f`"
    add-unmerged = "!f() { git diff --name-status --diff-filter=U | cut -f2 ; }; git add `f`"

    # fixup
    fu = "commit --amend --reset-author -C HEAD"
    fuu = "!git add -u && git fu"
    fua = "!f() { git commit --fixup=amend:$1; }; f"
